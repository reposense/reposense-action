[{"path":".github/workflows/test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: Test"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"on: "},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"# For scheduled deployment with Cron Jobs."},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"## Examples of cron schedule expressions:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"### \u00270 * * * *\u0027: hourly"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"### \u00270 0 * * *\u0027: daily"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"### \u00270 0 1 * *\u0027: monthly"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"#   schedule:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"#     - cron:  \u00270 0 * * *\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.GITHUB_TOKEN }} # Required"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"        version: \u0027release\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"        configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"        service: \u0027gh-pages\u0027 # Optional | Default: gh-pages | Other: surge"}],"authorContributionMap":{"tlylt":25}},{"path":".gitignore","fileType":"gitignore","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"reposense-report/"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"RepoSense/"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"reposense/"}],"authorContributionMap":{"tlylt":3}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"# reposense-action"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"This action provides the following functionality for GitHub Actions users:"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"- Deploy a RepoSense report to github pages/surge"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"# Usage"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"```yaml"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"# For active deployment on push to main branch"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"# For scheduled deployment with Cron Jobs."},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"## Examples of cron schedule expressions:"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"### \u00270 * * * *\u0027: hourly"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"### \u00270 0 * * *\u0027: daily"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"### \u00270 0 1 * *\u0027: monthly"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"#   schedule:"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"#     - cron:  \u00270 0 * * *\u0027"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"steps:"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"- uses: tlylt/reposense-action@main"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"  with:"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"    token: ${{ secrets.GITHUB_TOKEN }} # Required"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"    version: \u0027master\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    service: \u0027gh-pages\u0027 # Optional | Default: gh-pages | Other: surge"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"# Testing"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"```yaml"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"name: Test reposense-action"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"  push:"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"    branches:"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"      - main"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        version: \u0027release\u0027"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        configDirectory: \u0027configs\u0027"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"        service: \u0027gh-pages\u0027"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"```"}],"authorContributionMap":{"tlylt":54}},{"path":"action.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"name: reposense-action"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"description: \u0027Deploy your RepoSense Report to GitHub Pages\u0027"},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"branding: "},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"  icon: \u0027upload-cloud\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  color: \u0027blue\u0027"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"inputs:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"  token:"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"    description: the required token for deployment"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"    required: true"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"  version:"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"    description: the RepoSense version to use (release/master/tag v1.6.1/etc)"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    default: \u0027release\u0027"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    type: string"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"  configDirectory:"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    description: the directory to read the config files from"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    default: \u0027configs\u0027"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    type: string"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"  service:"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"    description: the publishing service (gh-pages/surge)"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    default: \u0027gh-pages\u0027"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"    type: string"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"  domain:"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"    description: the domain to use"},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"    type: string"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"runs:"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"  using: \"composite\""},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"  steps:"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"    - name: Checkout RepoSense scripts"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      uses: actions/checkout@v3"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"        repository: tlylt/reposense-action"},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"        path: \u0027.\u0027"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    - name: Checkout source repo"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":"      uses: actions/checkout@v3"},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        path: curr-repo"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"    - name: Check if config folder exists"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":"      run: |"},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"        if [ ! -d \"./curr-repo/${{ inputs.configDirectory }}\" ]; then"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"          echo \"No configs folder found. Exiting!\""},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"          exit 1"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":"        fi"},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"      shell: bash"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"    - uses: actions/setup-python@v3"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        python-version: \"3.8\""},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":"    - name: Install dependencies"},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"      run: pip install requests"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"      shell: bash"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"    - name: Install Java"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":"      uses: actions/setup-java@v3"},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"        java-version: \u002711\u0027"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":"        distribution: \u0027temurin\u0027"},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"    - name: Get RepoSense"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":"      run: bash ./run.sh ${{ inputs.version }}"},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"      shell: bash"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    - name: Generate report"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"      run: java -jar RepoSense.jar --config ./curr-repo/${{ inputs.configDirectory }}"},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"      shell: bash"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"    - name: Deploy via gh-pages"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"      if: ${{ success() }}"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"      uses: peaceiris/actions-gh-pages@v3"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":"        github_token: ${{ inputs.token }}"},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"        user_name: github-actions[bot]"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        user_email: 41898282+github-actions[bot]@users.noreply.github.com"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"        publish_dir: ./reposense-report"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"    - name: Install Node"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"      uses: actions/setup-node@v2"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"      if: inputs.service \u003d\u003d \u0027surge\u0027"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"        node-version: 12"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    - name: Deploy via Surge.sh"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"      if: inputs.service \u003d\u003d \u0027surge\u0027"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":"      run: |"},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"        npm i -g surge"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":"        surge --project ./reposense-report --domain ${{ inputs.domain }}"},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"      shell: bash"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"      env:"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"        SURGE_TOKEN: ${{ inputs.token }}"}],"authorContributionMap":{"tlylt":83}},{"path":"configs/author-config.csv","fileType":"csv","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"Repository\u0027s Location,Branch,Author\u0027s GitHub ID, Author\u0027s Emails, Author\u0027s Display Name,Author\u0027s Git Author Name,Ignore Glob List"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"https://github.com/tlylt/reposense-action.git,,tlylt,,,,"}],"authorContributionMap":{"tlylt":2}},{"path":"configs/repo-config.csv","fileType":"csv","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"Repository\u0027s Location,Branch,File formats,Ignore Glob List,Ignore standalone config,Ignore Commits List,Ignore Authors List"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"https://github.com/tlylt/reposense-action.git,main,,,,,"}],"authorContributionMap":{"tlylt":2}},{"path":"get-reposense.py","fileType":"py","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"#!/usr/bin/env python"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"import argparse"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"import sys"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"import os"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"import shutil"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"import requests"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"import subprocess"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":"JAR_FILENAME \u003d \u0027RepoSense.jar\u0027"},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"def parse_args():"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"    parser \u003d argparse.ArgumentParser(description\u003d\u0027Downloads a specific version of RepoSense.jar from our repository.\u0027)"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"    group \u003d parser.add_mutually_exclusive_group()"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    group.add_argument(\u0027-r\u0027, \u0027--release\u0027, action\u003d\u0027store_true\u0027, help\u003d\u0027Get RepoSense.jar from the latest release (Stable)\u0027)"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"    group.add_argument(\u0027-m\u0027, \u0027--master\u0027, action\u003d\u0027store_true\u0027, help\u003d\u0027Get RepoSense.jar from the latest master (Beta)\u0027)"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":"    group.add_argument(\u0027-t\u0027, \u0027--tag\u0027, help\u003d\u0027Get RepoSense.jar of a specific release version tag\u0027)"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"    group.add_argument(\u0027-c\u0027, \u0027--commit\u0027, help\u003d\u0027Get RepoSense.jar of a specific commit\u0027)"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"    parser.add_argument(\u0027-o\u0027, \u0027--overwrite\u0027, action\u003d\u0027store_true\u0027, help\u003d\u0027Overwrite RepoSense.jar file, if exists. Default: false\u0027)"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":"    return parser.parse_args()"},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":25,"author":{"gitId":"tlylt"},"content":"def handle_specific_commit(commit):"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    get_reposense_jar(\u0027https://api.github.com/repos/reposense/RepoSense/commits/\u0027 + commit, commit\u003dcommit)"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"def handle_specific_release(tag):"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"    get_reposense_jar(\u0027https://api.github.com/repos/reposense/RepoSense/releases/tags/\u0027 + tag, tag\u003dtag)"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"def handle_latest_release():"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"    get_reposense_jar(\u0027https://api.github.com/repos/reposense/RepoSense/releases/latest\u0027)"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":34,"author":{"gitId":"tlylt"},"content":"def get_reposense_jar(url, tag\u003dNone, commit\u003dNone):"},{"lineNumber":35,"author":{"gitId":"tlylt"},"content":"    response \u003d requests.get(url)"},{"lineNumber":36,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":37,"author":{"gitId":"tlylt"},"content":"    if tag and response.status_code \u003d\u003d 404:"},{"lineNumber":38,"author":{"gitId":"tlylt"},"content":"        print(\u0027Error, the provided tag does not exist!\u0027)"},{"lineNumber":39,"author":{"gitId":"tlylt"},"content":"        exit(1)"},{"lineNumber":40,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":41,"author":{"gitId":"tlylt"},"content":"    if commit and response.status_code in [404, 422]:"},{"lineNumber":42,"author":{"gitId":"tlylt"},"content":"        print(\u0027Error, the provided commit does not exist!\u0027)"},{"lineNumber":43,"author":{"gitId":"tlylt"},"content":"        exit(1)"},{"lineNumber":44,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":45,"author":{"gitId":"tlylt"},"content":"    if response.status_code in [403, 500]:"},{"lineNumber":46,"author":{"gitId":"tlylt"},"content":"        print(\u0027GitHub API has exceed the rate limit. Falling back to alternative method...\u0027)"},{"lineNumber":47,"author":{"gitId":"tlylt"},"content":"        clone_and_make_reposense(tag\u003dtag, commit\u003dcommit)"},{"lineNumber":48,"author":{"gitId":"tlylt"},"content":"        return"},{"lineNumber":49,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":50,"author":{"gitId":"tlylt"},"content":"    if commit:"},{"lineNumber":51,"author":{"gitId":"tlylt"},"content":"        clone_and_make_reposense(commit\u003dcommit)"},{"lineNumber":52,"author":{"gitId":"tlylt"},"content":"        return"},{"lineNumber":53,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":54,"author":{"gitId":"tlylt"},"content":"    url \u003d response.json()[\u0027assets\u0027][0][\u0027browser_download_url\u0027]"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"    download_file(url)"},{"lineNumber":56,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":57,"author":{"gitId":"tlylt"},"content":"def clone_and_make_reposense(tag\u003dNone, commit\u003dNone):"},{"lineNumber":58,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":59,"author":{"gitId":"tlylt"},"content":"    # Cleanup cached RepoSense folder"},{"lineNumber":60,"author":{"gitId":"tlylt"},"content":"    shutil.rmtree(\u0027RepoSense\u0027, ignore_errors\u003dTrue)"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":62,"author":{"gitId":"tlylt"},"content":"    command \u003d \\"},{"lineNumber":63,"author":{"gitId":"tlylt"},"content":"    \u0027\u0027\u0027"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"    git clone \u0027https://github.com/reposense/RepoSense.git\u0027 \u0026\u0026"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":"    cd RepoSense \u0026\u0026"},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"    \u0027\u0027\u0027"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"    if tag:"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":"        command +\u003d \u0027git checkout tags/{} -b deploy \u0026\u0026\u0027.format(tag)"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"    elif commit:"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"        command +\u003d  \u0027git checkout {} -b deploy \u0026\u0026\u0027.format(commit)"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"    command +\u003d \\"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"    \u0027\u0027\u0027"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"    ./gradlew zipreport shadowjar \u0026\u0026"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":"    mv build/jar/RepoSense.jar ../"},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"    \u0027\u0027\u0027"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"    subprocess.check_call(command, shell\u003dTrue)"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"def download_file(url):"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"    response \u003d requests.get(url, allow_redirects\u003dTrue)"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"    open(JAR_FILENAME, \u0027wb\u0027).write(response.content)"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"if __name__ \u003d\u003d \"__main__\":"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"    args \u003d parse_args()"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"    if os.path.exists(JAR_FILENAME) and args.overwrite is False:"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"        print(JAR_FILENAME + \u0027 already exists. Quitting.\u0027)"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        exit()"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"    if args.tag:"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":"        handle_specific_release(args.tag)"},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"        exit()"},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"    if args.commit:"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"        handle_specific_commit(args.commit)"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"        exit()"},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"    if args.master:"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"        clone_and_make_reposense()"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":"        exit()"},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":"    # If no arguments are provided or --release"},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"    handle_latest_release()"}],"authorContributionMap":{"tlylt":105}},{"path":"run.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"tlylt"},"content":"#!/bin/bash"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"# Downloads a specific version of RepoSense.jar of your choice from our repository"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":"## Examples of supported options:"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"### ./get-reposense.py --release               # Gets the latest release (Stable)"},{"lineNumber":6,"author":{"gitId":"tlylt"},"content":"### ./get-reposense.py --master                # Gets the latest master (Beta)"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"### ./get-reposense.py --tag v1.6.1            # Gets a specific version"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"### ./get-reposense.py --commit abc123         # Gets a specific commit"},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"### ./get-reposense.py --release --overwrite   # Overwrite RepoSense.jar, if exists, with the latest release"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"version\u003d$1"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":"if [[ -n \"$version\" ]]; then"},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"    ./get-reposense.py --$version  "},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"else"},{"lineNumber":16,"author":{"gitId":"tlylt"},"content":"    ./get-reposense.py --release"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"fi"},{"lineNumber":18,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"# Executes RepoSense"},{"lineNumber":20,"author":{"gitId":"tlylt"},"content":"# Do not change the default output folder name (reposense-report)"},{"lineNumber":21,"author":{"gitId":"tlylt"},"content":"## Examples of other valid options; For more, please view the user guide"},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"### java -jar RepoSense.jar --repos https://github.com/reposense/RepoSense.git"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"tlylt"},"content":"# java -jar RepoSense.jar --config ./configs"}],"authorContributionMap":{"tlylt":24}}]
