[{"path":".github/workflows/test.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"name: Test"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"on: "},{"lineNumber":4,"author":{"gitId":"-"},"content":"  push:"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    branches:"},{"lineNumber":6,"author":{"gitId":"-"},"content":"      - main"},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"  schedule:"},{"lineNumber":8,"author":{"gitId":"tlylt"},"content":"    - cron:  \u00270 0 * * *\u0027"},{"lineNumber":9,"author":{"gitId":"-"},"content":"# For scheduled deployment with Cron Jobs."},{"lineNumber":10,"author":{"gitId":"-"},"content":"## Examples of cron schedule expressions:"},{"lineNumber":11,"author":{"gitId":"-"},"content":"### \u00270 * * * *\u0027: hourly"},{"lineNumber":12,"author":{"gitId":"-"},"content":"### \u00270 0 * * *\u0027: daily"},{"lineNumber":13,"author":{"gitId":"-"},"content":"### \u00270 0 1 * *\u0027: monthly"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"jobs:"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  deploy:"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"    steps:"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":21,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        token: ${{ secrets.GITHUB_TOKEN }} # Required"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        version: \u0027release\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        service: \u0027gh-pages\u0027 # Optional | Default: gh-pages | Other: surge"},{"lineNumber":26,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":27,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":28,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.SURGE_TOKEN }} # Required"},{"lineNumber":29,"author":{"gitId":"tlylt"},"content":"        version: \u0027release\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":30,"author":{"gitId":"tlylt"},"content":"        configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"        service: \u0027surge\u0027"},{"lineNumber":32,"author":{"gitId":"tlylt"},"content":"        domain: \u0027reposense-action.surge.sh\u0027"}],"authorContributionMap":{"tlylt":9,"-":23}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"# reposense-action"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"tlylt"},"content":"[![GitHub CI](https://github.com/tlylt/reposense-action/actions/workflows/test.yml/badge.svg)](https://github.com/tlylt/reposense-action/actions/workflows/test.yml)"},{"lineNumber":4,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"This action provides the following functionality for GitHub Actions users:"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"tlylt"},"content":"- Deploy a RepoSense report to GitHub pages/surge"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"tlylt"},"content":"See an example of the report hosted for this very repository"},{"lineNumber":10,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":11,"author":{"gitId":"tlylt"},"content":"- [with GitHub pages](https://tlylt.github.io/reposense-action/)"},{"lineNumber":12,"author":{"gitId":"tlylt"},"content":"- [with surge.sh](https://reposense-action.surge.sh/)"},{"lineNumber":13,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":14,"author":{"gitId":"tlylt"},"content":"\u003cdetails\u003e"},{"lineNumber":15,"author":{"gitId":"tlylt"},"content":"\u003csummary\u003e \u003cb\u003eWhat is RepoSense\u003c/b\u003e \u003c/summary\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"[RepoSense](https://reposense.org/) is a tool for analyzing GitHub repositories and generating reports."},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"- Read the User Guide [here](https://reposense.org/ug/index.html)"},{"lineNumber":20,"author":{"gitId":"-"},"content":"- Understand how to specify the config files [here](https://reposense.org/ug/configFiles.html)"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"tlylt"},"content":"\u003c/details\u003e"},{"lineNumber":23,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"## Usage"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"A simple 2-step process:"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"- Specify the config files in the `configs` folder of your repo."},{"lineNumber":29,"author":{"gitId":"-"},"content":"  - You may see a sample config files in the [`configs` folder](./configs)."},{"lineNumber":30,"author":{"gitId":"-"},"content":"  - Using a different folder name is possible, just ensure you pass the correct folder name to the action."},{"lineNumber":31,"author":{"gitId":"-"},"content":"- Create a `reposense.yml` with the following content in `.github/workflows/`"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  - Make changes as necessary, such as the triggering event"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"```yaml"},{"lineNumber":35,"author":{"gitId":"-"},"content":"name: Deploy RepoSense report"},{"lineNumber":36,"author":{"gitId":"-"},"content":""},{"lineNumber":37,"author":{"gitId":"-"},"content":"on:"},{"lineNumber":38,"author":{"gitId":"-"},"content":"# For active deployment on push to main branch"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  push:"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    branches:"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      - main"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"# For scheduled deployment with Cron Jobs."},{"lineNumber":44,"author":{"gitId":"-"},"content":"## Examples of cron schedule expressions:"},{"lineNumber":45,"author":{"gitId":"-"},"content":"### \u00270 * * * *\u0027: hourly"},{"lineNumber":46,"author":{"gitId":"-"},"content":"### \u00270 0 * * *\u0027: daily"},{"lineNumber":47,"author":{"gitId":"-"},"content":"### \u00270 0 1 * *\u0027: monthly"},{"lineNumber":48,"author":{"gitId":"-"},"content":"#   schedule:"},{"lineNumber":49,"author":{"gitId":"-"},"content":"#     - cron:  \u00270 0 * * *\u0027"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"jobs:"},{"lineNumber":52,"author":{"gitId":"-"},"content":"  deploy:"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    steps:"},{"lineNumber":55,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@v1"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        token: ${{ secrets.GITHUB_TOKEN }} # Required"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        version: \u0027release\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        service: \u0027gh-pages\u0027 # Optional | Default: gh-pages | Other: surge"},{"lineNumber":61,"author":{"gitId":"tlylt"},"content":"        domain: \u0027\u0027 # Optional (Required if service \u003d surge) | Default: \u0027\u0027 | Other: \u0027\u003csubDomain\u003e.surge.sh\u0027"},{"lineNumber":62,"author":{"gitId":"-"},"content":"```"},{"lineNumber":63,"author":{"gitId":"-"},"content":""},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"## Option details"},{"lineNumber":65,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":66,"author":{"gitId":"tlylt"},"content":"### service"},{"lineNumber":67,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":68,"author":{"gitId":"tlylt"},"content":"Currently two types of publishing services are supported:"},{"lineNumber":69,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"- GitHub Pages"},{"lineNumber":71,"author":{"gitId":"tlylt"},"content":"  - `\u0027gh-pages\u0027`"},{"lineNumber":72,"author":{"gitId":"tlylt"},"content":"  - See [here](https://docs.github.com/en/pages/getting-started-with-github-pages) for more details"},{"lineNumber":73,"author":{"gitId":"tlylt"},"content":"- Surge.sh"},{"lineNumber":74,"author":{"gitId":"tlylt"},"content":"  - `\u0027surge\u0027`"},{"lineNumber":75,"author":{"gitId":"tlylt"},"content":"  - See [here](https://surge.sh/) for more details"},{"lineNumber":76,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":77,"author":{"gitId":"tlylt"},"content":"### token"},{"lineNumber":78,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":79,"author":{"gitId":"tlylt"},"content":"Currently two types of tokens are supported (correspond to the two supported publishing services):"},{"lineNumber":80,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":81,"author":{"gitId":"tlylt"},"content":"- Token for GitHub Pages"},{"lineNumber":82,"author":{"gitId":"tlylt"},"content":"  - Simply use `${{ secrets.GITHUB_TOKEN }}`"},{"lineNumber":83,"author":{"gitId":"tlylt"},"content":"  - Note that you need to ensure that you have selected the branch that you want to deploy to in your [GitHub repo\u0027s Pages settings](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#choosing-a-publishing-source)"},{"lineNumber":84,"author":{"gitId":"tlylt"},"content":"  - Deployment to GitHub Pages might take 5-10 minutes before the site is available/refreshed"},{"lineNumber":85,"author":{"gitId":"tlylt"},"content":"- Token for Surge.sh"},{"lineNumber":86,"author":{"gitId":"tlylt"},"content":"  - `${{ secrets.SURGE_TOKEN }}`"},{"lineNumber":87,"author":{"gitId":"tlylt"},"content":"    - `SURGE_TOKEN` is the environment secret name"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"  - Require registration with an email address"},{"lineNumber":89,"author":{"gitId":"tlylt"},"content":"  - After retrieving the token, put the token as a repository secret in your repository"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"  - See [here](https://surge-token-guide.surge.sh/) for a detailed guide on how to retrieve the token"},{"lineNumber":91,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":92,"author":{"gitId":"tlylt"},"content":"### domain"},{"lineNumber":93,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":94,"author":{"gitId":"tlylt"},"content":"The domain that the site is available at. Required if `service` chosen is Surge."},{"lineNumber":95,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":96,"author":{"gitId":"tlylt"},"content":"- A surge.sh subdomain"},{"lineNumber":97,"author":{"gitId":"tlylt"},"content":"  - `\u0027\u003csubDomain\u003e.surge.sh\u0027`"},{"lineNumber":98,"author":{"gitId":"tlylt"},"content":"  - Surge allows you to specify a subdomain for free as long as it has not been taken up by others. You have to ensure that the `\u003csubDomain\u003e` is unique."},{"lineNumber":99,"author":{"gitId":"tlylt"},"content":"  - A possible subdomain to use is your repository name: e.g. `mb-test.surge.sh`"},{"lineNumber":100,"author":{"gitId":"tlylt"},"content":"- A custom domain that you have configured with Surge"},{"lineNumber":101,"author":{"gitId":"tlylt"},"content":"  - Read the [Surge documentation](https://surge.sh/help/adding-a-custom-domain) to understand how to set it up"},{"lineNumber":102,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":103,"author":{"gitId":"tlylt"},"content":"## Recipes"},{"lineNumber":104,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":105,"author":{"gitId":"tlylt"},"content":"### Deploy to Github Pages every day"},{"lineNumber":106,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":107,"author":{"gitId":"tlylt"},"content":"```yaml"},{"lineNumber":108,"author":{"gitId":"tlylt"},"content":"name: RepoSense Action"},{"lineNumber":109,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":110,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":111,"author":{"gitId":"tlylt"},"content":"  schedule:"},{"lineNumber":112,"author":{"gitId":"tlylt"},"content":"    - cron:  \u00270 0 * * *\u0027"},{"lineNumber":113,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":114,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":115,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":116,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":117,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":118,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@v1"},{"lineNumber":119,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":120,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":121,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":122,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":123,"author":{"gitId":"tlylt"},"content":"### Deploy with a different config folder name"},{"lineNumber":124,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":125,"author":{"gitId":"tlylt"},"content":"```yaml"},{"lineNumber":126,"author":{"gitId":"tlylt"},"content":"name: RepoSense Action"},{"lineNumber":127,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":128,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":129,"author":{"gitId":"tlylt"},"content":"  schedule:"},{"lineNumber":130,"author":{"gitId":"tlylt"},"content":"    - cron:  \u00270 0 * * *\u0027"},{"lineNumber":131,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":132,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":133,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":134,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":135,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":136,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@v1"},{"lineNumber":137,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":138,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":139,"author":{"gitId":"tlylt"},"content":"        configDirectory: \u0027reposense-configs\u0027"},{"lineNumber":140,"author":{"gitId":"tlylt"},"content":"```"},{"lineNumber":141,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":142,"author":{"gitId":"tlylt"},"content":"### Deploy with surge.sh"},{"lineNumber":143,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":144,"author":{"gitId":"tlylt"},"content":"```yaml"},{"lineNumber":145,"author":{"gitId":"tlylt"},"content":"name: RepoSense Action"},{"lineNumber":146,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":147,"author":{"gitId":"tlylt"},"content":"on:"},{"lineNumber":148,"author":{"gitId":"tlylt"},"content":"  schedule:"},{"lineNumber":149,"author":{"gitId":"tlylt"},"content":"    - cron:  \u00270 0 * * *\u0027"},{"lineNumber":150,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":151,"author":{"gitId":"tlylt"},"content":"jobs:"},{"lineNumber":152,"author":{"gitId":"tlylt"},"content":"  deploy:"},{"lineNumber":153,"author":{"gitId":"tlylt"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":154,"author":{"gitId":"tlylt"},"content":"    steps:"},{"lineNumber":155,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@v1"},{"lineNumber":156,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":157,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.SURGE_TOKEN }}"},{"lineNumber":158,"author":{"gitId":"tlylt"},"content":"        service: \u0027surge\u0027"},{"lineNumber":159,"author":{"gitId":"tlylt"},"content":"        domain: \u0027whatever-subdomain-test.surge.sh\u0027"},{"lineNumber":160,"author":{"gitId":"-"},"content":"```"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"## Testing"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"```yaml"},{"lineNumber":165,"author":{"gitId":"-"},"content":"name: Test reposense-action"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"on:"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  push:"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    branches:"},{"lineNumber":170,"author":{"gitId":"-"},"content":"      - main"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"jobs:"},{"lineNumber":173,"author":{"gitId":"-"},"content":"  deploy:"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"    steps:"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":178,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        token: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        version: \u0027release\u0027"},{"lineNumber":181,"author":{"gitId":"-"},"content":"        configDirectory: \u0027configs\u0027"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        service: \u0027gh-pages\u0027"},{"lineNumber":183,"author":{"gitId":"tlylt"},"content":"    - uses: tlylt/reposense-action@main"},{"lineNumber":184,"author":{"gitId":"tlylt"},"content":"      with:"},{"lineNumber":185,"author":{"gitId":"tlylt"},"content":"        token: ${{ secrets.SURGE_TOKEN }} # Required"},{"lineNumber":186,"author":{"gitId":"tlylt"},"content":"        version: \u0027release\u0027 # Optional | Default: release | Other: master/tag v1.6.1/etc"},{"lineNumber":187,"author":{"gitId":"tlylt"},"content":"        configDirectory: \u0027configs\u0027 # Optional | Default: configs"},{"lineNumber":188,"author":{"gitId":"tlylt"},"content":"        service: \u0027surge\u0027"},{"lineNumber":189,"author":{"gitId":"tlylt"},"content":"        domain: \u0027reposense-action.surge.sh\u0027"},{"lineNumber":190,"author":{"gitId":"-"},"content":"```"},{"lineNumber":191,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":192,"author":{"gitId":"tlylt"},"content":"## Troubleshooting"},{"lineNumber":193,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":194,"author":{"gitId":"tlylt"},"content":"### Workflow errors"},{"lineNumber":195,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":196,"author":{"gitId":"tlylt"},"content":"1. You may need to ensure that the scripts are executable (which may not be true when using a Windows machine)"},{"lineNumber":197,"author":{"gitId":"tlylt"},"content":"   - By doing:"},{"lineNumber":198,"author":{"gitId":"tlylt"},"content":"     - `git update-index --chmod\u003d+x run.sh`"},{"lineNumber":199,"author":{"gitId":"tlylt"},"content":"     - `git update-index --chmod\u003d+x get-reposense.py`"},{"lineNumber":200,"author":{"gitId":"tlylt"},"content":""},{"lineNumber":201,"author":{"gitId":"tlylt"},"content":"1. You may need to ensure that the access is granted to the workflows for deployment"},{"lineNumber":202,"author":{"gitId":"tlylt"},"content":"   - By going to `settings` in the GitHub UI and ensuring that the `Actions \u003e General \u003e Workflow permissions` are set to `Read and write permissions`"}],"authorContributionMap":{"tlylt":129,"-":73}},{"path":"action.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"name: reposense-action"},{"lineNumber":2,"author":{"gitId":"tlylt"},"content":"description: \u0027Deploy your RepoSense Report\u0027"},{"lineNumber":3,"author":{"gitId":"-"},"content":"branding: "},{"lineNumber":4,"author":{"gitId":"-"},"content":"  icon: \u0027upload-cloud\u0027"},{"lineNumber":5,"author":{"gitId":"tlylt"},"content":"  color: \u0027green\u0027"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"inputs:"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  token:"},{"lineNumber":9,"author":{"gitId":"-"},"content":"    description: the required token for deployment"},{"lineNumber":10,"author":{"gitId":"-"},"content":"    required: true"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  version:"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    description: the RepoSense version to use (release/master/tag v1.6.1/etc)"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    default: \u0027release\u0027"},{"lineNumber":14,"author":{"gitId":"-"},"content":"    type: string"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  configDirectory:"},{"lineNumber":16,"author":{"gitId":"-"},"content":"    description: the directory to read the config files from"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    default: \u0027configs\u0027"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    type: string"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  service:"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    description: the publishing service (gh-pages/surge)"},{"lineNumber":21,"author":{"gitId":"-"},"content":"    default: \u0027gh-pages\u0027"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    type: string"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  domain:"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    description: the domain to use"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    type: string"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"runs:"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  using: \"composite\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"  steps:"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    - name: Checkout RepoSense scripts"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      uses: actions/checkout@v3"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        repository: tlylt/reposense-action"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        path: \u0027.\u0027"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    - name: Checkout source repo"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      uses: actions/checkout@v3"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        path: curr-repo"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    - name: Check if config folder exists"},{"lineNumber":40,"author":{"gitId":"-"},"content":"      run: |"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        if [ ! -d \"./curr-repo/${{ inputs.configDirectory }}\" ]; then"},{"lineNumber":42,"author":{"gitId":"-"},"content":"          echo \"No configs folder found. Exiting!\""},{"lineNumber":43,"author":{"gitId":"-"},"content":"          exit 1"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        fi"},{"lineNumber":45,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    - uses: actions/setup-python@v3"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        python-version: \"3.8\""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    - name: Install dependencies"},{"lineNumber":50,"author":{"gitId":"-"},"content":"      run: pip install requests"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    - name: Install Java"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      uses: actions/setup-java@v3"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        java-version: \u002711\u0027"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        distribution: \u0027temurin\u0027"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    - name: Get RepoSense"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      run: bash ./run.sh ${{ inputs.version }}"},{"lineNumber":59,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    - name: Generate report"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      run: java -jar RepoSense.jar --config ./curr-repo/${{ inputs.configDirectory }}"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    - name: Deploy via gh-pages"},{"lineNumber":64,"author":{"gitId":"tlylt"},"content":"      if: inputs.service \u003d\u003d \u0027gh-pages\u0027"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      uses: peaceiris/actions-gh-pages@v3"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        github_token: ${{ inputs.token }}"},{"lineNumber":68,"author":{"gitId":"-"},"content":"        user_name: github-actions[bot]"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        user_email: 41898282+github-actions[bot]@users.noreply.github.com"},{"lineNumber":70,"author":{"gitId":"-"},"content":"        publish_dir: ./reposense-report"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    - name: Install Node"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      uses: actions/setup-node@v2"},{"lineNumber":73,"author":{"gitId":"-"},"content":"      if: inputs.service \u003d\u003d \u0027surge\u0027"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        node-version: 12"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    - name: Deploy via Surge.sh"},{"lineNumber":77,"author":{"gitId":"-"},"content":"      if: inputs.service \u003d\u003d \u0027surge\u0027"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      run: |"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        npm i -g surge"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        surge --project ./reposense-report --domain ${{ inputs.domain }}"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      env:"},{"lineNumber":83,"author":{"gitId":"-"},"content":"        SURGE_TOKEN: ${{ inputs.token }}"}],"authorContributionMap":{"tlylt":3,"-":80}}]
